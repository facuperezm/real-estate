---
const categories = [
	{ id: "all", label: "Todo", icon: "grid" },
	{ id: "casas", label: "Casas", icon: "home" },
	{ id: "departamentos", label: "Departamentos", icon: "building" },
	{ id: "terrenos", label: "Terrenos", icon: "map" },
	{ id: "locales", label: "Locales", icon: "store" },
	{ id: "oficinas", label: "Oficinas", icon: "briefcase" },
	{ id: "cocheras", label: "Cocheras", icon: "car" },
	{ id: "campos", label: "Campos", icon: "tree" },
]

const icons: Record<string, string> = {
	grid: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>`,
	home: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`,
	building: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><rect width="16" height="20" x="4" y="2" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg>`,
	map: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"/><path d="M15 5.764v15"/><path d="M9 3.236v15"/></svg>`,
	store: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/><path d="M2 7h20"/><path d="M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"/></svg>`,
	briefcase: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/><rect width="20" height="14" x="2" y="6" rx="2"/></svg>`,
	car: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"/><circle cx="7" cy="17" r="2"/><path d="M9 17h6"/><circle cx="17" cy="17" r="2"/></svg>`,
	tree: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="size-6"><path d="M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z"/><path d="M7 16v6"/><path d="M13 19v3"/><path d="M10.4 10.7a3 3 0 1 1 5.2-.2A3 3 0 0 1 17.9 16H14a3 3 0 0 1-3-3.2V10Z"/></svg>`,
}
---

<div class="sticky top-[73px] z-40 border-b border-airbnb-gray-100 bg-white">
	<div class="mx-auto max-w-[1760px] px-6 md:px-10 lg:px-20">
		<div class="relative flex items-center">
			<button
				id="scroll-left"
				class="pointer-events-none absolute left-0 z-10 hidden size-8 items-center justify-center rounded-full border border-airbnb-gray-200 bg-white opacity-0 transition-shadow hover:shadow-md lg:flex"
				aria-label="Scroll left"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					class="size-4"
				>
					<path d="m15 18-6-6 6-6"></path>
				</svg>
			</button>

			<div
				id="categories-scroll"
				class="scrollbar-hide flex items-center gap-8 overflow-x-auto scroll-smooth py-4"
			>
				{
					categories.map((category, index) => (
						<button
							class:list={[
								"category-btn flex min-w-fit flex-col items-center gap-2 border-b-2 pb-3 transition-all duration-200",
								index === 0
									? "border-airbnb-gray-500 text-airbnb-gray-500"
									: "border-transparent text-airbnb-gray-400 hover:border-airbnb-gray-200 hover:text-airbnb-gray-500",
							]}
							data-category={category.id}
						>
							<span set:html={icons[category.icon]} />
							<span class="whitespace-nowrap text-xs font-medium">{category.label}</span>
						</button>
					))
				}
			</div>

			<button
				id="scroll-right"
				class="absolute right-0 z-10 hidden size-8 items-center justify-center rounded-full border border-airbnb-gray-200 bg-white transition-shadow hover:shadow-md lg:flex"
				aria-label="Scroll right"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					class="size-4"
				>
					<path d="m9 18 6-6-6-6"></path>
				</svg>
			</button>
		</div>
	</div>
</div>

<script>
	const scrollContainer = document.getElementById("categories-scroll")
	const scrollLeftBtn = document.getElementById("scroll-left")
	const scrollRightBtn = document.getElementById("scroll-right")
	const categoryBtns = document.querySelectorAll(".category-btn")

	function updateScrollButtons() {
		if (!scrollContainer || !scrollLeftBtn || !scrollRightBtn) return

		const { scrollLeft, scrollWidth, clientWidth } = scrollContainer

		if (scrollLeft > 0) {
			scrollLeftBtn.classList.remove("opacity-0", "pointer-events-none")
		} else {
			scrollLeftBtn.classList.add("opacity-0", "pointer-events-none")
		}

		if (scrollLeft < scrollWidth - clientWidth - 10) {
			scrollRightBtn.classList.remove("opacity-0", "pointer-events-none")
		} else {
			scrollRightBtn.classList.add("opacity-0", "pointer-events-none")
		}
	}

	scrollLeftBtn?.addEventListener("click", () => {
		scrollContainer?.scrollBy({ left: -200, behavior: "smooth" })
	})

	scrollRightBtn?.addEventListener("click", () => {
		scrollContainer?.scrollBy({ left: 200, behavior: "smooth" })
	})

	scrollContainer?.addEventListener("scroll", updateScrollButtons)
	window.addEventListener("resize", updateScrollButtons)
	updateScrollButtons()

	categoryBtns.forEach((btn) => {
		btn.addEventListener("click", () => {
			categoryBtns.forEach((b) => {
				b.classList.remove("border-airbnb-gray-500", "text-airbnb-gray-500")
				b.classList.add("border-transparent", "text-airbnb-gray-400")
			})
			btn.classList.remove("border-transparent", "text-airbnb-gray-400")
			btn.classList.add("border-airbnb-gray-500", "text-airbnb-gray-500")
		})
	})
</script>
