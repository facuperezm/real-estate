---
import { api } from "@/lib/api"
import Property from "@/components/Property.astro"

const properties = await api.getPropertyList()
---

<section class="mx-auto max-w-[1760px] px-6 py-6 md:px-10 lg:px-20">
	<div
		class="grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6"
	>
		{
			properties.map((property) => {
				const photos = property.photos
					? property.photos.map((photo: any) => photo?.fields?.file?.url || "").filter(Boolean)
					: []

				return (
					<Property
						id={String(property.id)}
						photos={photos}
						title={property.title}
						price={property.price}
						rooms={property.rooms}
						m2={property.m2}
						location="Argentina"
						type="Propiedad"
					/>
				)
			})
		}
	</div>

	{
		properties.length === 0 && (
			<div class="flex flex-col items-center justify-center py-20 text-center">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="1.5"
					stroke-linecap="round"
					stroke-linejoin="round"
					class="mb-4 size-16 text-airbnb-gray-300"
				>
					<path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
					<path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
				</svg>
				<h3 class="mb-2 text-xl font-semibold text-airbnb-gray-500">
					No hay propiedades disponibles
				</h3>
				<p class="max-w-md text-airbnb-gray-400">
					Intenta ajustar tus filtros de busqueda o vuelve mas tarde.
				</p>
			</div>
		)
	}
</section>
